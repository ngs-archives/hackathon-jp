<?xml version="1.0" encoding="UTF-8"?>
<Module>
	<ModulePrefs title="Practice">
    	<Require feature="opensocial-0.8"/>
	</ModulePrefs>
  	<Content type="html">
    <![CDATA[
      <script>
        function loadFriends() {
          var req = opensocial.newDataRequest();
		  var opt_params = {};
		  opt_params[opensocial.DataRequest.PeopleRequestFields.MAX] = 100;
		  opt_params[opensocial.DataRequest.PeopleRequestFields.PROFILE_DETAILS] = 
		  [opensocial.Person.Field.ABOUT_ME];
		  
		  req.add(req.newFetchPersonRequest("OWNER"), 'owner');
		  var ownerFriends = opensocial.newIdSpec({"userId":"OWNER","groupId":"FRIENDS"});
		  req.add(req.newFetchPeopleRequest(ownerFriends,opt_params),'ownerFriends');
		  
          req.add(req.newFetchPersonRequest("VIEWER"), 'viewer');
		  var viewerFriends = opensocial.newIdSpec({"userId":"VIEWER","groupId":"FRIENDS"});
          req.add(req.newFetchPeopleRequest(viewerFriends,opt_params),'viewerFriends');
		  
		  req.send(onLoadFriends);
        }
        
        function onLoadFriends(data) {
			var param = {};
			param[]
			
			var owner = data.get('owner').getData();
			var ownerFriends = data.get('ownerFriends').getData();
		
			var viewer = data.get('viewer').getData();
			var viewerFriends = data.get('viewerFriends').getData();
			
			var html = new Array();
			html.push('<select id="owner">');
			ownerFriends.each(function(person) {
				if (person.getId()) {
					html.push('<option value="', person.getId(), '">', person.getField(opensocial.Person.Field.ABOUT_ME), '</option>');
				}
			});
			
			html.push('</select>');
			
			html.push('<select id="viewer">');
			viewerFriends.each(function(person) {
				if (person.getId()) {
					html.push('<option value="', person.getId(), '">', person.getDisplayName(), '</option>');
				}
			});
			html.push('</select>');
			document.getElementById('main').innerHTML = html.join('');
        }
        function init() {
           loadFriends();
        }        
        gadgets.util.registerOnLoadHandler(init);
      </script>
      <div id='main'>
      </div>
    ]]>
  </Content>
</Module>