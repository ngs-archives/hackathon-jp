<?xml version="1.0" encoding="UTF-8" ?>
<Module>
	<ModulePrefs title="FinalQuestion" height="1500">
		<Require feature="dynamic-height"/>
	</ModulePrefs>
	<Content type="html" view="canvas">
	<![CDATA[
		<script>document.write('<link rel="stylesheet" href="http://hackathon-jp.googlecode.com/svn/trunk/OpenSocial20090515/FinalQuestion/katsube.css?rand=' + Math.random() + '" type="text/css" />');</script>
		<h1>FinalQuestion</h1>

		<!-- [メイン画面] -->
		<div id="main"></div>

		<!-- [メニュー] -->
		<div id="mainmenu" style="display:none">
			<div id="mainmenu-in">
				<ul id="menulist">
					<li id="battle">バトル</li>
					<li id="castle">城</li>
					<li id="item">アイテム</li>
				</ul>
				<div class="status" style="clear:both"></div>
			</div>
		</div>
		<!-- [/メニュー] -->

		<!-- [お城] -->
		<div id="maincastle" style="display:none">
			<div id="maincastle-in">
				<div id="hime">
					※姫
				</div>
				<div class="status"></div>
			</div>
		</div>
		<!-- [/お城] -->

		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			/*----------------------------------------------------
			 * ■メインメニュー
			 *----------------------------------------------------*/
			var MainMenu = {
				//------------------------------
				//HTMLのIDリスト
				//------------------------------
				'id':{
					  'canvas':'#main'
					,   'menu':'#mainmenu'

					, 'battle':'#battle'
					, 'castle':'#castle'
					,   'item':'#item'
				}

				//------------------------------
				//初期化(onLoad時に呼び出し)
				//------------------------------
				, 'init' : function(){
					//メニュー表示
					MainMenu.disp(
						  MainMenu.id.canvas
						, MainMenu.id.menu
					);
					
					//イベント設定
					$(MainMenu.id.battle)
						.mouseover( function(){ $(this).css('font-size','180%'); Status.write('キラー○シンとクイズでバトル！') } )
						.mouseout( function(){ $(this).css('font-size','130%');} )
						.click( Battle.start );
					
					$(MainMenu.id.castle)
						.mouseover( function(){ $(this).css('font-size','180%'); Status.write('お姫様に会いに行こう') } )
						.mouseout( function(){ $(this).css('font-size','130%');} )
						.click( Castle.start );

					$(MainMenu.id.item)
						.mouseover( function(){ $(this).css('font-size','180%'); Status.write('アイテムについてのアレコレ')} )
						.mouseout( function(){ $(this).css('font-size','130%');} )
						.click( Item.start );
					
				}

				//------------------------------
				//メニュー表示
				//------------------------------
				, 'disp' : function(canvas, menu){
					var source = $(menu).html();
					$(canvas).html(source);
				}
			};

			/*----------------------------------------------------
			 * ■ステータス
			 *----------------------------------------------------*/
			 var Status = {
				//------------------------------
				//HTMLのIDリスト
				//------------------------------
				'id': '.status'

				//------------------------------
				//ステータスに表示
				//------------------------------
				, 'write':function(msg){
					$(Status.id).html(msg);
				}
			 };

			/*----------------------------------------------------
			 * ■バトルスタート
			 *----------------------------------------------------*/
			 var Battle = {
				'start':function(){
					alert('battle start');
				}
			 };
			 
			/*----------------------------------------------------
			 * ■城
			 *----------------------------------------------------*/
			 var Castle = {
				//------------------------------
				//HTMLのIDリスト
				//------------------------------
				'id':{
					  'canvas':'#main'
					, 'castle':'#maincastle'
				}

				//------------------------------
				//初期処理
				//------------------------------
				, 'start':function(){
					Castle.disp(
						  Castle.id.canvas
						, Castle.id.castle
					);
					
					Status.write(
						  '<span style="font-weight:bold">姫「あなた如き豚が私に何のご用かしら？」</span><br />\n'
						+ '<br />\n'
						+ '　姫はさげすんだ視線を浴びせた！<br />\n'
						+ '<br />\n'
						+ '<span style="font-weight:bold">姫「・・・あら、貢ぎ物？」</span><br />\n'
						+ '<br />\n'
						+ '　<a href="#" id="castle-next1">姫はけだるそうに貢ぎ物を見定めた!</a>'
					);

					//------------------------
					//イベント登録
					//------------------------
					$('#castle-next1').click(function(){
						Status.write(
							  '<span style="font-weight:bold">姫「ふん。あなたにしては良くがんばったじゃない」</span><br />\n'
							+ '<br />\n'
							+ '　姫はかったるそうに語り出した<br />\n'
							+ '<br />\n'
							+ '<span style="font-weight:bold">姫「私の出す質問に答えられたら少し見直してあげるわ。もし答えられなかったら死んでもらうけどよろしいかしら？」</span><br />\n'
							+ '<a href="#" id="castle-next2">よろしくないが…これも運命とあきらめて次へ</a>'
						);

						$('#castle-next2').click(function(){
							Status.write(
								  '<span style="font-weight:bold">姫「わたしが幼少の頃に育てていたペットの好物は？」</span><br />\n'
								+ '  <br />\n'
								+ '　<a href="#" id="castle-next3">ラーメン</a>\n'
								+ '　<a href="#" id="castle-next4">つけ麺</a>\n'
								+ '　<a href="#" id="castle-next5">イケメン</a>\n'
							);

							$('#castle-next3').click(function(){
								Status.write(
									  '<span style="font-weight:bold">死にました</span><br />\n'
									+ '  <br />\n'
									+ '<a href="#" id="castle-next6">次へ</a>'
								);
								$('#castle-next6').click(function(){
									MainMenu.init();
									Status.write('次がありますよ。がんばってください！');
								});
							});
							$('#castle-next4').click(function(){
								Status.write(
									  '<span style="font-weight:bold">死にました</span><br />\n'
									+ '  <br />\n'
									+ '<a href="#" id="castle-next7">次へ</a>'
								);
								$('#castle-next7').click(function(){
									MainMenu.init();
									Status.write('次がありますよ。がんばってください！');
								});
							});
							$('#castle-next5').click(function(){
								Status.write(
									  '<span style="font-weight:bold; color:red">姫「何で知ってるの！このストーカー！！」</span><br />\n'
									+ '  <br />\n'
									+ '　姫は少しほほを赤らめながら<br />\n'
									+ '<br />\n'
									+ '<span style="font-weight:bold">姫「しかし、約束は守りましょう。よくぞ試練に耐え活躍してくれました。次も期待していますよ」</span><br />\n'
									+ '<br />\n'
									+ '　姫の言葉を胸に、プレイヤーの次の冒険が始まる！'
									+ '<a href="#" id="castle-next99">次へ</a>'
								);

								$('#castle-next99').click(function(){
									Ending.start();
								});
							});

						});
					});

				}

				//------------------------------
				//城の初期画面表示
				//------------------------------
				, 'disp' : function(canvas, castle){
					var source = $(castle).html();
					$(canvas).html(source);
				}
			 };
			 
			/*----------------------------------------------------
			 * ■エンディング
			 *----------------------------------------------------*/
			 var Ending = {
				//------------------------------
				//HTMLのIDリスト
				//------------------------------
				'id':{
					  'canvas':'#main'
				}

				//------------------------------
				//初期処理
				//------------------------------
				, 'start':function(){
					alert('ちょっとまて');
				}
			};

			/*----------------------------------------------------
			 * ■アイテム
			 *----------------------------------------------------*/
			 var Item = {
				'start':function(){
					alert('item start');
				}
			 };
			
			/*----------------------------------------------------
			 * ■onLoad イベントハンドラ
			 *----------------------------------------------------*/
			gadgets.util.registerOnLoadHandler(function(){
				//メニュー表示
				MainMenu.init();
				
				//ステータス更新
				Status.write('Final Questionへようこそ');
				
				//高さ変更
				//gadgets.window.adjustHeight();
			});
		</script>
	]]>
	</Content>
</Module>
